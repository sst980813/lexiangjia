<!--community.wxml-->
<view class="page-container">
  <navigation-bar title="ç¤¾åŒº" back="{{false}}" color="#8B5A3C" background="#F7E6D3"></navigation-bar>
  
  <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
  <view class="main-content {{safeAreaClass}}">
    <scroll-view class="scroll-container" scroll-y type="list">
      
      <!-- å¸–å­åˆ—è¡¨ -->
      <view class="posts-section">
        <view class="posts-list">
          <view class="post-item" wx:for="{{posts}}" wx:key="id" bindtap="onPostTap" data-post="{{item}}">
            
            <!-- ç”¨æˆ·ä¿¡æ¯ -->
            <view class="post-header">
              <view class="user-info">
                <image class="user-avatar" src="{{item.user.avatar}}" mode="aspectFill"></image>
                <view class="user-details">
                  <text class="user-name">{{item.user.name}}</text>
                  <text class="post-time">{{item.time}}</text>
                </view>
              </view>
                <!-- äº’åŠ¨åŒºåŸŸ -->
            <view class="post-actions">
              <view class="action-item" bindtap="onLikePost" data-post="{{item}}" catchtap="true">
                <text class="action-icon {{item.liked ? 'liked' : ''}}">â¤ï¸</text>
                <text class="action-count">{{item.likes}}</text>
              </view>
            </view>
            </view>
            
            <!-- å¸–å­å†…å®¹ -->
            <view class="post-content">
              <text class="post-text">{{item.content}}</text>
              
              <!-- å›¾ç‰‡å±•ç¤º -->
              <view class="post-images" wx:if="{{item.images && item.images.length > 0}}">
                <view class="image-grid {{item.images.length === 1 ? 'single' : item.images.length === 2 ? 'double' : 'multiple'}}">
                  <image class="post-image" 
                         wx:for="{{item.images}}" 
                         wx:key="*this" 
                         wx:for-item="image"
                         src="{{image}}" 
                         mode="aspectFill"
                         bindtap="onImageTap" 
                         data-image="{{image}}" 
                         data-images="{{item.images}}"
                         catchtap="true"></image>
                </view>
              </view>
            </view>
            
            
          </view>
        </view>
      </view>
      
      <!-- ç©ºçŠ¶æ€ -->
      <view class="empty-state" wx:if="{{posts.length === 0}}">
        <text class="empty-icon">ğŸ“</text>
        <text class="empty-text">æš‚æ— å¸–å­</text>
        <text class="empty-desc">å¿«æ¥å‘å¸ƒç¬¬ä¸€æ¡åŠ¨æ€å§</text>
      </view>
      
    </scroll-view>
    
    <!-- æµ®åŠ¨å‘å¸–æŒ‰é’® -->
    <view class="fab-button" bindtap="onCreatePost">
      <text class="fab-icon">âœï¸</text>
    </view>
    
  </view>
</view>
