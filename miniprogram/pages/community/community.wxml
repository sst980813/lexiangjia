<!--community.wxml-->
<view class="page-container">
  <navigation-bar title="社区" back="{{false}}" color="#8B5A3C" background="#F7E6D3"></navigation-bar>
  
  <!-- 主要内容区域 -->
  <view class="main-content {{safeAreaClass}}">
    <scroll-view class="scroll-container" scroll-y type="list">
      
      <!-- 帖子列表 -->
      <view class="posts-section">
        <view class="posts-list">
          <view class="post-item" wx:for="{{posts}}" wx:key="id" bindtap="onPostTap" data-post="{{item}}">
            
            <!-- 用户信息 -->
            <view class="post-header">
              <view class="user-info">
                <image class="user-avatar" src="{{item.user.avatar}}" mode="aspectFill"></image>
                <view class="user-details">
                  <text class="user-name">{{item.user.name}}</text>
                  <text class="post-time">{{item.time}}</text>
                </view>
              </view>
                <!-- 互动区域 -->
            <view class="post-actions">
              <view class="action-item" bindtap="onLikePost" data-post="{{item}}" catchtap="true">
                <text class="action-icon {{item.liked ? 'liked' : ''}}">❤️</text>
                <text class="action-count">{{item.likes}}</text>
              </view>
            </view>
            </view>
            
            <!-- 帖子内容 -->
            <view class="post-content">
              <text class="post-text">{{item.content}}</text>
              
              <!-- 图片展示 -->
              <view class="post-images" wx:if="{{item.images && item.images.length > 0}}">
                <view class="image-grid {{item.images.length === 1 ? 'single' : item.images.length === 2 ? 'double' : 'multiple'}}">
                  <image class="post-image" 
                         wx:for="{{item.images}}" 
                         wx:key="*this" 
                         wx:for-item="image"
                         src="{{image}}" 
                         mode="aspectFill"
                         bindtap="onImageTap" 
                         data-image="{{image}}" 
                         data-images="{{item.images}}"
                         catchtap="true"></image>
                </view>
              </view>
            </view>
            
            
          </view>
        </view>
      </view>
      
      <!-- 空状态 -->
      <view class="empty-state" wx:if="{{posts.length === 0}}">
        <text class="empty-icon">📝</text>
        <text class="empty-text">暂无帖子</text>
        <text class="empty-desc">快来发布第一条动态吧</text>
      </view>
      
    </scroll-view>
    
    <!-- 浮动发帖按钮 -->
    <view class="fab-button" bindtap="onCreatePost">
      <text class="fab-icon">✏️</text>
    </view>
    
  </view>
</view>
