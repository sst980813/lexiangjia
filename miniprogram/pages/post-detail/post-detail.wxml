<!--post-detail.wxml-->
<view class="page-container">
  <navigation-bar title="Â∏ñÂ≠êËØ¶ÊÉÖ" color="#8B5A3C" background="#F7E6D3"></navigation-bar>
  
  <!-- ‰∏ªË¶ÅÂÜÖÂÆπÂå∫Âüü -->
  <view class="main-content">
    <scroll-view class="scroll-container" scroll-y type="list">
      
      <!-- Â∏ñÂ≠êËØ¶ÊÉÖ -->
      <view class="post-detail" wx:if="{{post}}">
        
        <!-- Áî®Êà∑‰ø°ÊÅØ -->
        <view class="post-header">
          <view class="user-info">
            <image class="user-avatar" src="{{post.user.avatar}}" mode="aspectFill"></image>
            <view class="user-details">
              <text class="user-name">{{post.user.name}}</text>
              <text class="post-time">{{post.time}}</text>
            </view>
          </view>
        </view>
        
        <!-- Â∏ñÂ≠êÂÜÖÂÆπ -->
        <view class="post-content">
          <text class="post-text">{{post.content}}</text>
          
          <!-- ÂõæÁâáÂ±ïÁ§∫ -->
          <view class="post-images" wx:if="{{post.images && post.images.length > 0}}">
            <view class="image-grid {{post.images.length === 1 ? 'single' : post.images.length === 2 ? 'double' : 'multiple'}}">
              <image class="post-image" 
                     wx:for="{{post.images}}" 
                     wx:key="*this" 
                     wx:for-item="image"
                     src="{{image}}" 
                     mode="aspectFill"
                     bindtap="onImageTap" 
                     data-image="{{image}}" 
                     data-images="{{post.images}}"></image>
            </view>
          </view>
        </view>
        
        <!-- ‰∫íÂä®Âå∫Âüü -->
        <view class="post-actions">
          <view class="action-item" bindtap="onLikePost">
            <text class="action-icon {{post.liked ? 'liked' : ''}}">‚ù§Ô∏è</text>
            <text class="action-count">{{post.likes}}</text>
          </view>
          <view class="action-item" bindtap="onCommentPost">
            <text class="action-icon">üí¨</text>
            <text class="action-count">{{comments.length}}</text>
          </view>
        </view>
        
      </view>
      
      <!-- ËØÑËÆ∫Âå∫Âüü -->
      <view class="comments-section">
        <view class="section-header">
          <text class="section-title">ËØÑËÆ∫ ({{comments.length}})</text>
        </view>
        
        <view class="comments-list">
          <view class="comment-item" wx:for="{{comments}}" wx:key="id">
            <image class="comment-avatar" src="{{item.user.avatar}}" mode="aspectFill"></image>
            <view class="comment-content">
              <view class="comment-header">
                <text class="comment-user">{{item.user.name}}</text>
                <text class="comment-time">{{item.time}}</text>
              </view>
              <text class="comment-text">{{item.content}}</text>
            </view>
          </view>
        </view>
      </view>
      
    </scroll-view>
    
    <!-- Â∫ïÈÉ®ËØÑËÆ∫ËæìÂÖ• -->
    <view class="comment-input-bar">
      <input class="comment-input" 
             placeholder="ÂÜôËØÑËÆ∫..." 
             value="{{commentText}}"
             bindinput="onCommentInput" />
      <button class="send-btn" bindtap="onSendComment">ÂèëÈÄÅ</button>
    </view>
    
  </view>
</view>
