<!--travel-destinations.wxml-->
<view class="page-container">
  <navigation-bar title="æ—…å±…å…»è€" color="#8B5A3C" background="#F7E6D3"></navigation-bar>
  
  <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
  <view class="main-content {{safeAreaClass}}">
    <scroll-view class="scroll-container" scroll-y type="list"> 
      <!-- æœç´¢æ  -->
      <view class="search-section">
        <view class="search-bar">
          <text class="search-icon">ğŸ”</text>
          <input class="search-input" 
                 placeholder="æœç´¢æ°‘å®¿/ç›®çš„åœ°..." 
                 value="{{searchKeyword}}"
                 bindinput="onSearchInput" />
        </view>
      </view>

      <!-- ç­›é€‰æ ‡ç­¾ -->
      <view class="filter-section">
        <scroll-view class="filter-scroll" scroll-x>
          <view class="filter-tags">
            <view class="filter-tag {{currentFilter === 'homestay' ? 'active' : ''}}" 
                  bindtap="onFilterChange" data-filter="homestay">
              ä¼šå‘˜æ°‘å®¿
            </view>
            <view class="filter-tag {{currentFilter === 'destination' ? 'active' : ''}}" 
                  bindtap="onFilterChange" data-filter="destination">
              ç²¾é€‰ç›®çš„åœ°
            </view>
          </view>
        </scroll-view>
      </view>

      <!-- ä¼šå‘˜æ°‘å®¿åˆ—è¡¨ -->
      <view class="homestay-section" wx:if="{{currentFilter === 'homestay'}}">
        <view class="section-header">
          <text class="section-title">ä¼šå‘˜æ°‘å®¿</text>
          <text class="section-count">å…±{{filteredHomestays.length}}ä¸ªæ°‘å®¿</text>
        </view>
        
        <view class="homestay-list">
          <view class="homestay-item" 
                wx:for="{{filteredHomestays}}" 
                wx:key="id" 
                bindtap="onHomestayTap" 
                data-homestay="{{item}}">
            <image class="homestay-image" src="{{item.image}}" mode="aspectFill"></image>
            <view class="homestay-info">
              <view class="homestay-header">
                <text class="homestay-name">{{item.name}}</text>
              </view>
              <text class="homestay-location">ğŸ“ {{item.location}}</text>
              <text class="homestay-description">{{item.description}}</text>
              <view class="homestay-tags">
                <view class="homestay-tag" wx:for="{{item.tags}}" wx:key="*this" wx:for-item="tag">
                  <text class="homestay-tag-text">{{tag}}</text>
                </view>
              </view>
              <view class="homestay-footer">
                <view class="price-info">
                  <text class="price-label">ä¼šå‘˜ä»·</text>
                  <text class="price-value">Â¥{{item.memberPrice}}</text>
                  <text class="price-unit">/æ™š</text>
                </view>
              </view>
            </view>
          </view>
        </view>
      </view>

      <!-- ç›®çš„åœ°åˆ—è¡¨ -->
      <view class="destinations-section" wx:if="{{currentFilter === 'destination'}}">
        <view class="section-header">
          <text class="section-title">ç²¾é€‰ç›®çš„åœ°</text>
          <text class="section-count">å…±{{filteredDestinations.length}}ä¸ªç›®çš„åœ°</text>
        </view>
        
        <view class="destinations-list">
          <view class="destination-item" 
                wx:for="{{filteredDestinations}}" 
                wx:key="id" 
                bindtap="onDestinationTap" 
                data-destination="{{item}}">
            <image class="destination-image" src="{{item.image}}" mode="aspectFill"></image>
            <view class="destination-info">
              <view class="destination-header">
                <text class="destination-name">{{item.name}}</text>
                <view class="destination-rating">
                  <text class="rating-star">â­</text>
                  <text class="rating-score">{{item.rating}}</text>
                </view>
              </view>
              <text class="destination-location">ğŸ“ {{item.location}}</text>
              <text class="destination-description">{{item.description}}</text>
              <view class="destination-tags">
                <view class="destination-tag" wx:for="{{item.tags}}" wx:key="*this" wx:for-item="tag">
                  <text class="destination-tag-text">{{tag}}</text>
                </view>
              </view>
              <view class="destination-footer">
                <view class="price-info">
                  <text class="price-label">èµ·ä»·</text>
                  <text class="price-value">Â¥{{item.startPrice}}</text>
                  <text class="price-unit">/äºº/æœˆ</text>
                </view>
                <!-- <view class="discount-info" wx:if="{{item.discount}}">
                  <text class="discount-text">ä¼šå‘˜{{item.discount}}æŠ˜</text>
                </view> -->
              </view>
            </view>
          </view>
        </view>
      </view>

      <!-- ç©ºçŠ¶æ€ -->
      <view class="empty-state" wx:if="{{filteredDestinations.length === 0&&currentFilter === 'destination'}}">
        <text class="empty-icon">ğŸ”</text>
        <text class="empty-text">æš‚æ— ç›¸å…³ç›®çš„åœ°</text>
        <text class="empty-desc">è¯•è¯•å…¶ä»–ç­›é€‰æ¡ä»¶</text>
      </view>

    </scroll-view>
  </view>
</view>
