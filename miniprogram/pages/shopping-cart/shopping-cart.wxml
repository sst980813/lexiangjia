<!--shopping-cart.wxml-->
<view class="page-container">
  <navigation-bar title="è´­ç‰©è½¦" color="#8B5A3C" background="#F7E6D3"></navigation-bar>
  
  <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
  <view class="main-content {{safeAreaClass}}">
    <scroll-view class="scroll-container" scroll-y type="list">
      
      <!-- è´­ç‰©è½¦åˆ—è¡¨ -->
      <view class="cart-section" wx:if="{{cartItems.length > 0}}">
        <view class="cart-list">
          <view class="cart-item" wx:for="{{cartItems}}" wx:key="id">
            <view class="item-checkbox">
              <checkbox checked="{{item.selected}}" 
                        bindchange="onItemSelect" 
                        data-id="{{item.id}}"></checkbox>
            </view>
            <image class="item-image" src="{{item.image}}" mode="aspectFill"></image>
            <view class="item-info">
              <text class="item-name">{{item.name}}</text>
              <text class="item-desc">{{item.description}}</text>
              <view class="item-tags">
                <view class="item-tag" wx:for="{{item.tags}}" wx:key="*this" wx:for-item="tag">
                  <text>{{tag}}</text>
                </view>
              </view>
              <view class="item-footer">
                <view class="item-price">
                  <text class="price-symbol">Â¥</text>
                  <text class="price-value">{{item.price}}</text>
                  <text class="price-unit" wx:if="{{item.unit}}">/{{item.unit}}</text>
                </view>
                <view class="quantity-controls">
                  <button class="quantity-btn" 
                          bindtap="onQuantityChange" 
                          data-id="{{item.id}}" 
                          data-action="decrease">-</button>
                  <text class="quantity-value">{{item.quantity}}</text>
                  <button class="quantity-btn" 
                          bindtap="onQuantityChange" 
                          data-id="{{item.id}}" 
                          data-action="increase">+</button>
                </view>
                      <view class="item-actions">
              <button class="delete-btn" 
                      bindtap="onDeleteItem" 
                      data-id="{{item.id}}">
                <text class="delete-text">åˆ é™¤</text>
              </button>
            </view>
              </view>
            </view>
      
          </view>
        </view>
      </view>

      <!-- ç©ºè´­ç‰©è½¦ -->
      <view class="empty-cart" wx:if="{{cartItems.length === 0}}">
        <text class="empty-icon">ğŸ›’</text>
        <text class="empty-text">è´­ç‰©è½¦æ˜¯ç©ºçš„</text>
        <text class="empty-desc">å¿«å»é€‰è´­å¿ƒä»ªçš„å•†å“å§</text>
        <button class="go-shopping-btn" bindtap="onGoShopping">
          <text class="btn-text">å»è´­ç‰©</text>
        </button>
      </view>

    </scroll-view>

    <!-- åº•éƒ¨æ“ä½œæ  -->
    <view class="bottom-bar" wx:if="{{cartItems.length > 0}}">
      <view class="select-all">
        <checkbox checked="{{allSelected}}" bindchange="onSelectAll"></checkbox>
        <text class="select-all-text">å…¨é€‰</text>
      </view>
      <view class="total-info">
        <text class="total-label">åˆè®¡ï¼š</text>
        <text class="total-symbol">Â¥</text>
        <text class="total-value">{{totalPrice}}</text>
      </view>
      <button class="checkout-btn {{selectedItems.length > 0 ? 'active' : 'disabled'}}" 
              bindtap="onCheckout" 
              disabled="{{selectedItems.length === 0}}">
        <text class="checkout-text">ç»“ç®—({{selectedItems.length}})</text>
      </button>
    </view>
  </view>
</view>
